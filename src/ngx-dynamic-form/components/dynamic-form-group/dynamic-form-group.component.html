<ng-template #labelTemplate>
    <label [ngClass]="'control-label control-label-' + control.data.labelAlign" [attr.for]="control.formId">
        {{ control.label | translate: control.parent }}
    </label>
</ng-template>
<ng-template #errorTemplate>
    <div class="error-message" *ngIf="control.errors && control.touched">
        <span class="help-block" *ngFor="let error of control.errors | entries">
            {{ error.key | translate: error.value }}
        </span>
    </div>
</ng-template>
<ng-template #inputTemplate let-control="control">
    <ng-container [form-control]="control"></ng-container>
</ng-template>
<ng-template #defaultControlTemplate
             let-context
             let-control="control"
             let-data="control.data"
             let-labelTemplate="labelTemplate"
             let-inputTemplate="inputTemplate"
             let-prefixTemplate="prefixTemplate"
             let-suffixTemplate="suffixTemplate"
             let-errorTemplate="errorTemplate">
    <ng-container [ngTemplateOutlet]="prefixTemplate"
                  [ngTemplateOutletContext]="context"></ng-container>
    <ng-container *ngIf="control.label && data.labelAlign == 'left'"
                  [ngTemplateOutlet]="labelTemplate"
                  [ngTemplateOutletContext]="context">
    </ng-container>
    <ng-container [ngTemplateOutlet]="inputTemplate"
                  [ngTemplateOutletContext]="context"></ng-container>
    <ng-container *ngIf="control.label && data.labelAlign == 'right'"
                  [ngTemplateOutlet]="labelTemplate"
                  [ngTemplateOutletContext]="context">
    </ng-container>
    <ng-container [ngTemplateOutlet]="suffixTemplate"
                  [ngTemplateOutletContext]="context"></ng-container>
    <ng-container [ngTemplateOutlet]="errorTemplate"
                  [ngTemplateOutletContext]="context"></ng-container>
</ng-template>

<ng-container [ngxTemplateOutlet]="form.controlTemplates[control.id] || form.controlTemplate || defaultControlTemplate"
              [context]="{
                    control: control,
                    labelTemplate: form.labelTemplates[control.id] || labelTemplate,
                    inputTemplate: form.inputTemplates[control.id] || inputTemplate,
                    prefixTemplate: form.prefixTemplates[control.id],
                    suffixTemplate: form.suffixTemplates[control.id],
                    errorTemplate: errorTemplate
                  }">
</ng-container>
